{
  "version": 3,
  "sources": ["node_modules/book-of-spells/src/helpers.mjs", "node_modules/book-of-spells/src/regex.mjs", "node_modules/book-of-spells/src/browser.mjs", "src/lib/utils.js", "src/lib/youtube-background.js", "src/lib/vimeo-background.js", "src/lib/video-background.js", "src/video-backgrounds.js", "src/main.js"],
  "sourcesContent": ["/**\n * Shallow merges two objects together. Used to pass simple options to functions.\n * \n * @param {object} target The target object to merge into\n * @param {object} source The source object to merge from\n * @returns object The merged object\n * @example\n * const target = { foo: 'bar' }\n * const source = { bar: 'baz' }\n * shallowMerge(target, source) // { foo: 'bar', bar: 'baz' }\n */\nexport function shallowMerge(target, source) {\n  for (const key in source) {\n    target[key] = source[key]\n  }\n}\n\n/**\n * Deep merge function that's mindful of arrays and objects\n * \n * @param {object} target The target object to merge into\n * @param {object} source The source object to merge from\n * @returns object The merged object\n * @example\n * const target = { foo: 'bar' }\n * const source = { bar: 'baz' }\n * deepMerge(target, source) // { foo: 'bar', bar: 'baz' }\n */\nexport function deepMerge(target, source) {\n  if (isObject(source) && isObject(target)) {\n    for (const key in source) {\n      target[key] = deepMerge(target[key], source[key])\n    }\n  } else if (isArray(source) && isArray(target)) {\n    for (let i = 0; i < source.length; i++) {\n      target[i] = deepMerge(target[i], source[i])\n    }\n  } else {\n    target = source\n  }\n  return target\n}\n\n/**\n * Deep clone function that's mindful of arrays and objects\n * \n * @param {object} o The object to clone\n * @returns object The cloned object\n * @example\n * const obj = { foo: 'bar' }\n * const clone = clone(obj)\n * clone.foo = 'baz'\n * console.log(obj.foo) // 'bar'\n * console.log(clone.foo) // 'baz'\n * console.log(obj === clone) // false\n * console.log(JSON.stringify(obj) === JSON.stringify(clone)) // true\n * @todo Check if faster than assign. This function is pretty old...\n */ \nexport function clone(o) {\n  let res = null\n  if (isArray(o)) {\n    res = []\n    for (const i in o) {\n      res[i] = clone(o[i])\n    }\n  } else if (isObject(o)) {\n    res = {}\n    for (const i in o) {\n      res[i] = clone(o[i])\n    }\n  } else {\n    res = o\n  }\n  return res\n}\n\n/**\n * Check if an object is empty\n * \n * @param {object} o The object to check\n * @returns boolean True if the object is empty, false otherwise\n * @example\n * isEmptyObject({}) // => true\n * isEmptyObject({ foo: 'bar' }) // => false\n */\nexport function isEmptyObject(o) {\n  for (const i in o) {\n    return false\n  }\n  return true\n}\n\n/**\n * Check if an array is empty, substitute for Array.length === 0\n * \n * @param {array} o The array to check\n * @returns boolean True if the array is empty, false otherwise\n * @example\n * isEmptyArray([]) // => true\n * isEmptyArray([1, 2, 3]) // => false\n */\nexport function isEmptyArray(o) {\n  return o.length === 0\n}\n\n/**\n * Check if a variable is empty\n * \n * @param {any} o The variable to check\n * @returns boolean True if the variable is empty, false otherwise\n * @example\n * isEmpty({}) // => true\n * isEmpty([]) // => true\n * isEmpty('') // => true\n * isEmpty(null) // => false\n * isEmpty(undefined) // => false\n * isEmpty(0) // => false\n */\nexport function isEmpty(o) {\n  if (isObject(o)) {\n    return isEmptyObject(o)\n  } else if (isArray(o)) {\n    return isEmptyArray(o)\n  } else if (isString(o)) {\n    return o === ''\n  }\n  return false\n}\n\n/**\n * Try to convert a string to a boolean\n * \n * @param {string} str The string to convert\n * @returns boolean The converted boolean or undefined if conversion failed\n * @example\n * stringToBoolean('true') // => true\n * stringToBoolean('false') // => false\n * stringToBoolean('foo') // => null\n */\nexport function stringToBoolean(str) {\n  if (/^\\s*(true|false)\\s*$/i.test(str)) return str === 'true'\n}\n\n/**\n * Try to convert a string to a number\n * \n * @param {string} str The string to convert\n * @returns number The converted number or undefined if conversion failed\n * @example\n * stringToNumber('1') // => 1\n * stringToNumber('1.5') // => 1.5\n * stringToNumber('foo') // => null\n * stringToNumber('1foo') // => null\n */\nexport function stringToNumber(str) {\n  if (/^\\s*\\d+\\s*$/.test(str)) return parseInt(str)\n  if (/^\\s*[\\d.]+\\s*$/.test(str)) return parseFloat(str)\n}\n\n/**\n * Try to convert a string to an array\n * \n * @param {string} str The string to convert\n * @returns array The converted array or undefined if conversion failed\n * @example\n * stringToArray('[1, 2, 3]') // => [1, 2, 3]\n * stringToArray('foo') // => null\n * stringToArray('1') // => null\n * stringToArray('{\"foo\": \"bar\"}') // => null\n */\nexport function stringToArray(str) {\n  if (!/^\\s*\\[.*\\]\\s*$/.test(str)) return\n  try {\n    return JSON.parse(str)\n  } catch (e) {}\n}\n\n/**\n * Try to convert a string to an object\n * \n * @param {string} str The string to convert\n * @returns object The converted object or undefined if conversion failed\n * @example\n * stringToObject('{ \"foo\": \"bar\" }') // => { foo: 'bar' }\n * stringToObject('foo') // => null\n * stringToObject('1') // => null\n * stringToObject('[1, 2, 3]') // => null\n */\nexport function stringToObject(str) {\n  if (!/^\\s*\\{.*\\}\\s*$/.test(str)) return\n  try {\n    return JSON.parse(str)\n  } catch (e) {}\n}\n\n/**\n * Try to convert a string to a regex\n * \n * @param {string} str The string to convert\n * @returns regex The converted regex or undefined if conversion failed\n * @example\n * stringToRegex('/foo/i') // => /foo/i\n * stringToRegex('foo') // => null\n * stringToRegex('1') // => null\n */\nexport function stringToRegex(str) {\n  if (!/^\\s*\\/.*\\/g?i?\\s*$/.test(str)) return\n  try {\n    return new RegExp(str)\n  } catch (e) {}\n}\n\n/**\n * Try to convert a string to a primitive\n * \n * @param {string} str The string to convert\n * @returns {null|boolean|int|float|string} The converted primitive or input string if conversion failed\n * @example\n * stringToPrimitive('null') // => null\n * stringToPrimitive('true') // => true\n * stringToPrimitive('false') // => false\n * stringToPrimitive('1') // => 1\n * stringToPrimitive('1.5') // => 1.5\n * stringToPrimitive('foo') // => 'foo'\n * stringToPrimitive('1foo') // => '1foo'\n */\nexport function stringToPrimitive(str) {\n  if (/^\\s*null\\s*$/.test(str)) return null\n  const bool = stringToBoolean(str)\n  if (bool !== undefined) return bool\n  return stringToNumber(str) || str\n}\n\n/**\n * Try to convert a string to a data type\n * \n * @param {string} str The string to convert\n * @returns any The converted data type or input string if conversion failed\n * @example\n * stringToData('null') // => null\n * stringToData('true') // => true\n * stringToData('false') // => false\n * stringToData('1') // => 1\n * stringToData('1.5') // => 1.5\n * stringToData('foo') // => 'foo'\n * stringToData('1foo') // => '1foo'\n * stringToData('[1, 2, 3]') // => [1, 2, 3]\n * stringToData('{ \"foo\": \"bar\" }') // => { foo: 'bar' }\n * stringToData('/foo/i') // => /foo/i\n */\nexport function stringToType(str) {\n  if (/^\\s*null\\s*$/.test(str)) return null\n  const bool = stringToBoolean(str)\n  if (bool !== undefined) return bool\n  return stringToNumber(str) || stringToArray(str) || stringToObject(str) || stringToRegex(str) || str\n}\n\n/**\n * If provided variable is an object\n * \n * @param {any} o \n * @returns boolean\n * @example\n * isObject({}) // => true\n * isObject([]) // => false\n * isObject(null) // => false\n */\nexport function isObject(o) {\n  return typeof o === 'object' && !Array.isArray(o) && o !== null\n}\n\n/**\n * If provided variable is an array. Just a wrapper for Array.isArray\n * \n * @param {any} o\n * @returns boolean\n * @example\n * isArray([]) // => true\n * isArray({}) // => false\n */\nexport function isArray(o) {\n  return Array.isArray(o)\n}\n\n/**\n * If provided variable is a string. Just a wrapper for typeof === 'string'\n * \n * @param {any} o\n * @returns boolean\n * @example\n * isString('foo') // => true\n * isString({}) // => false\n */\nexport function isString(o) {\n  return typeof o === 'string'\n}\n\n/**\n * If provided variable is a function, substitute for typeof === 'function'\n * \n * @param {any} o\n * @returns boolean\n * @example\n * isFunction(function() {}) // => true\n * isFunction({}) // => false\n */\nexport function isFunction(o) {\n  return typeof o === 'function'\n}\n\n/**\n * If object property is a function\n * \n * @param {object} obj\n * @param {string} propertyName\n * @returns boolean\n * @example\n * const obj = { foo: 'bar', baz: function() {} }\n * propertyIsFunction(obj, 'foo') // => false\n * propertyIsFunction(obj, 'baz') // => true\n */\nexport function propertyIsFunction(obj, propertyName) {\n  return obj.hasOwnProperty(propertyName) && isFunction(obj[propertyName])\n}\n\n/**\n * If object property is a string\n * \n * @param {object} obj\n * @param {string} propertyName\n * @returns boolean\n * @example\n * const obj = { foo: 'bar', baz: function() {} }\n * propertyIsString(obj, 'foo') // => true\n * propertyIsString(obj, 'baz') // => false\n */\nexport function propertyIsString(obj, propertyName) {\n  return obj.hasOwnProperty(propertyName) && isString(obj[propertyName])\n}\n\n/**\n * Transforms a dash separated string to camelCase\n *\n * @param {string} str\n * @returns boolean\n * @example\n * transformDashToCamelCase('foo-bar') // => 'fooBar'\n * transformDashToCamelCase('foo-bar-baz') // => 'fooBarBaz'\n * transformDashToCamelCase('foo') // => 'foo'\n * transformDashToCamelCase('fooBarBaz-qux') // => 'fooBarBazQux'\n */\nexport function transformDashToCamelCase(str) {\n  return str.replace(/-([a-z])/g, function (g) { return g[1].toUpperCase() });\n}\n\n/**\n * Transforms a camelCase string to dash separated string\n * \n * @param {string} str\n * @returns boolean\n * @example\n * transformCamelCaseToDash('fooBar') // => 'foo-bar'\n * transformCamelCaseToDash('fooBarBaz') // => 'foo-bar-baz'\n * transformCamelCaseToDash('foo') // => 'foo'\n * transformDashToCamelCase('fooBarBaz-qux') // => 'foo-bar-baz-qux'\n */\nexport function transformCamelCaseToDash(str) {\n  return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase()\n}\n\n/**\n * Maps an array of objects by a property name\n * \n * @param {array} arr\n * @param {string} propertyName\n * @returns object\n * @example\n * const arr = [{ foo: 'bar' }, { foo: 'baz' }]\n * mapByProperty(arr, 'foo') // => { bar: { foo: 'bar' }, baz: { foo: 'baz' } }\n */\nexport function mapByProperty(arr, propertyName) {\n  const res = {}\n  for (let i = 0; i < arr.length; i++) {\n    res[arr[i][propertyName]] = arr[i]\n  }\n  return res\n}\n\n/**\n * Maps an array of objects by a property name to another property name\n * \n * @param {array} arr\n * @param {string} keyPropertyName\n * @param {string} valuePropertyName\n * @returns object\n * @example\n * const arr = [{ foo: 'bar', baz: 'qux' }, { foo: 'quux', baz: 'corge' }]\n * mapPropertyToProperty(arr, 'foo', 'baz') // => { bar: 'qux', quux: 'corge' }\n */\nexport function mapPropertyToProperty(arr, keyPropertyName, valuePropertyName) {\n  const res = {}\n  for (let i = 0; i < arr.length; i++) {\n    res[arr[i][keyPropertyName]] = arr[i][valuePropertyName]\n  }\n  return res\n}\n\n/**\n * Remove accents from a string\n * \n * @param {string} inputString\n * @returns string\n * @example\n * removeAccents('\u00E1\u00E9\u00ED\u00F3\u00FA') // => 'aeiou'\n * removeAccents('\u00C1\u00C9\u00CD\u00D3\u00DA') // => 'AEIOU'\n * removeAccents('se\u00F1or') // => 'senor'\n * removeAccents('\u0152') // => 'OE'\n */\nexport function removeAccents(inputString) {\n  return inputString.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').replace(/\\\u0153/g, \"oe\").replace(/\\\u00E6/g, \"ae\").normalize('NFC')\n}\n\n/**\n * Strip HTML tags from a string\n * \n * @param {string} inputString\n * @returns string\n * @example\n * stripHTMLTags('<span>foo</span>') // => 'foo'\n * stripHTMLTags('<span>foo</span> <span>bar</span>') // => 'foo bar'\n */\nexport function stripHTMLTags(inputString) {\n  return inputString.replace(/<[^>]*>/g, '')\n}\n\n/**\n * Slugify a string, e.g. 'Foo Bar' => 'foo-bar'. Similar to WordPress' sanitize_title(). Will remove accents and HTML tags.\n * \n * @param {string} str \n * @returns string\n * @example\n * slugify('Foo Bar') // => 'foo-bar'\n * slugify('Foo Bar <span>baz</span>') // => 'foo-bar-baz'\n */\nexport function slugify(str) {\n  str = str.trim().toLowerCase()\n  str = removeAccents(str)\n  str = stripHTMLTags(str)\n  return str.replace(/\\s+|\\.+|\\/+|\\\\+|\u2014+|\u2013+/g, '-').replace(/[^\\w0-9\\-]+/g, '').replace(/-{2,}/g, '-').replace(/^-|-$/g, '')\n}\n\n/**\n * Check if object has multiple properties\n * \n * @param {object} obj\n * @param {string|array} properties\n * @returns boolean\n * @example\n * const obj = { foo: 'bar', baz: 'qux' }\n * hasOwnProperties(obj, ['foo', 'baz']) // => true\n * hasOwnProperties(obj, ['foo', 'baz', 'qux']) // => false\n */\nexport function hasOwnProperties(obj, properties) {\n  if(!isArray(properties)) properties = [properties]\n  for (let i = 0; i < properties.length; i++) {\n    if (!obj.hasOwnProperty(properties[i])) return false\n  }\n  return true\n}\n\n/**\n * Finds the closest number to the set goal in an array to a given number\n * \n * @param {number} goal Number to search for\n * @param {array} arr Array of numbers to search in\n * @returns number\n * @example\n * closestNumber(10, [1, 2, 3, 4, 5, 6, 7, 8, 9]) // => 9\n * closestNumber(10, [1, 2, 3, 4, 5, 6, 7, 8, 9, 11]) // => 9\n * closestNumber(10, [1, 2, 3, 4, 5, 6, 7, 8, 9, 11, 9.5]) // => 9.5\n * closestNumber(10, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11) // => 10\n */\nexport function closestNumber(goal, arr) {\n  return arr.reduce(function(prev, curr) {\n    return Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev\n  })\n}\n\n/**\n * Truncate a string to a given number of words\n * \n * @param {string} str String to truncate\n * @param {number} numWords Number of words to truncate to\n * @param {string} ellipsis Ellipsis to append to the end of the string\n * @returns string\n * @example\n * truncateString('foo bar baz', 2) // => 'foo bar\u2026'\n * truncateString('foo bar baz', 2, '...') // => 'foo bar...'\n * truncateString('foo bar. baz', 2, '...') // => 'foo bar. ...'\n */\nexport function truncateString(str, numWords, ellipsis = '\u2026') {\n  const words = str.trim().split(' ')\n  if (words.length <= numWords) return str\n  if (numWords <= 0) return ''\n  if (/[.?!]$/.test(words[numWords - 1]) && ellipsis.trim() !== '') ellipsis = ` ${ellipsis}`\n  return words.slice(0, numWords).join(' ') + ellipsis\n}\n\n/**\n * Generates a random integer between two values, inclusive of both\n * \n * @param {number} min Minimum value\n * @param {number} max Maximum value\n * @returns number\n * @example\n * randomIntInclusive(1, 10) // => 1\n * randomIntInclusive(1, 10) // => 10\n * randomIntInclusive(1, 10) // => 5\n */\nexport function randomIntInclusive(min, max) {\n  if (min > max) [min, max] = [max, min]\n  if (min === max) return min\n  min = Math.ceil(min)\n  max = Math.floor(max)\n  return Math.floor(Math.random() * (max - min + 1)) + min\n}\n\n/**\n * Gets fixed number of digits after the decimal point\n * \n * @param {number} number Number to fix\n * @param {number} digits Number of digits to fix to\n * @returns number\n * @example\n * fixed(1.234, 2) // => 1.23\n * fixed(1.235, 2) // => 1.24\n * fixed(1.234) // => 1\n * fixed(1.234, 0) // => 1\n * fixed(1.234, 5) // => 1.234\n * @note Gotta ask myself why I wrote this function in the first place... \uD83E\uDD14 It's just not useful in a lot of cases lol...\n */\nexport function fixed(number, digits) {\n  if (!digits) return parseInt(number)\n  return parseFloat(number.toFixed(digits))\n}\n\n/**\n * Calculates the percentage of a number in relation to another number\n * \n * @param {number} num Number to calculate percentage of\n * @param {number} total Total number\n * @returns number\n * @example\n * getPercentage(1, 10) // => 10\n * getPercentage(5, 10) // => 50\n * getPercentage(10, 10) // => 100\n * getPercentage(0, 10) // => 0\n * getPercentage(10, 2) // => 500\n */\nexport function getPercentage(num, total) {\n  if (!num || !total || Number.isNaN(num) || Number.isNaN(total)) return 0\n  return num / total * 100\n}\n\n/**\n * Parses a resolution string into a number. Resolution string is in the format of 'width:height', e.g. '16:9' \n * \n * @param {string} res Resolution string. Format is 'width:height', e.g. '16:9', or 'widthxheight', e.g. '16x9', or 'width-height', e.g. '16-9', or 'width/height', e.g. '16/9'\n * @returns number\n * @example\n * parseResolutionString('16:9') // => 1.7777777778\n * parseResolutionString('4:3') // => 1.3333333333\n * parseResolutionString('4x3') // => 1.3333333333\n * parseResolutionString('4-3') // => 1.3333333333\n */\nexport function parseResolutionString(res) {\n  const DEFAULT_RESOLUTION = 1.7777777778 // 16:9\n  if (!res || !res.length || /16[\\:x\\-\\/]{1}9/i.test(res)) return DEFAULT_RESOLUTION\n  const pts = res.split(/\\s?[\\:x\\-\\/]{1}\\s?/i)\n  if (pts.length < 2) return DEFAULT_RESOLUTION\n\n  const w = parseInt(pts[0])\n  const h = parseInt(pts[1])\n\n  if (w === 0 || h === 0) return DEFAULT_RESOLUTION\n  if (isNaN(w) || isNaN(h)) return DEFAULT_RESOLUTION\n\n  return w/h;\n}\n", "/**\n * @module regex\n */\n\n/**\n * Regular expression for matching a YouTube video links and extracting their ID, works with both embed and watch URLs\n */\nexport const RE_YOUTUBE = /(?:youtube\\.com\\/(?:[^\\/]+\\/.+\\/|(?:v|e(?:mbed)?)\\/|.*[?&]v=)|youtu\\.be\\/)([^\"&?\\/ ]{11})/i\n\n/**\n * Regular expression for matching a Vimeo video links and extracting their ID, works with both embed and watch URLs, channels and groups\n */\nexport const RE_VIMEO = /(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/(?:[^\\/]*)\\/videos\\/|album\\/(?:\\d+)\\/video\\/|video\\/|)(\\d+)(?:[a-zA-Z0-9_\\-]+)?/i\n\n/**\n * Regular expression for matching a video URLs\n */\nexport const RE_VIDEO = /(.*\\/[^\\/]+\\.mp4|ogg|ogv|ogm|webm|avi)\\s?$/i\n\n/**\n * Regular expression for matching a image URLs\n */\nexport const RE_IMAGE = /(.*\\/[^\\/]+\\.jpg|jpeg|png|gif|svg|webp)\\s?$/i\n\n/**\n * Regular expression for matching a URL parameters\n */\nexport const RE_URL_PARAMETER = /([^\\s=&]+)=?([^&\\s]+)?/\n\n/**\n * Regular expression for matching a HTML attribute and tag names, also for matching shortcode attributes and names\n */\nexport const RE_ATTRIBUTES = /\\s*(?:([a-z_]{1}[a-z0-9\\-_]*)=?(?:\"([^\"]+)\"|'([^']+)')*)\\s*/gi\n\n/**\n * Regular expression for matching a single attribute without value\n */\nexport const RE_ATTRIBUTE_WITHOUT_VALUE = /^\\s*([a-z_]{1}[a-z0-9\\-_]*)\\s*$/i\n\n/**\n * Regular expression for matching a single attribute with value\n */\nexport const RE_ATTRIBUTE_WITH_VALUE = /^\\s*([a-z_]{1}[a-z0-9\\-_]*)=(\"[^\"]+\"|'[^']+')\\s*$/i\n\n/**\n * Regular expression for matching the first or last quote of a string used for removing them\n */\nexport const RE_FIRST_OR_LAST_QUOTE = /^[\"']|[\"']$/g\n", "/** @module browser */\n\nimport { isEmpty, isFunction } from './helpers.mjs'\nimport { css } from './dom.mjs'\nimport { parseUrlParameters } from './parsers.mjs'\n\nexport function isUserAgentIOS(str) {\n  return /iPad|iPhone|iPod/i.test(str)\n}\n\nexport function isUserAgentMobile(str) {\n  return /\\b(BlackBerry|webOS|iPhone|IEMobile)\\b/i.test(str) ||\n    /\\b(Android|Windows Phone|iPad|iPod)\\b/i.test(str)\n}\n\nexport function isUserAgentSafari(str) {\n  return /^((?!chrome|android|crios|fxios).)*safari/i.test(str)\n}\n\n/**\n * Check if the device is an iOS device\n * \n * @returns boolean True if the device is an iOS device, false otherwise\n */\nexport function isIOS() {\n  return isUserAgentIOS(navigator.userAgent) && 'maxTouchPoints' in navigator && navigator.maxTouchPoints > 1\n}\n\n/**\n * Check if the device is a mobile device\n * \n * @returns boolean True if the device is a mobile device, false otherwise\n */\nexport function isMobile() {\n  if ('maxTouchPoints' in navigator) return navigator.maxTouchPoints > 0\n\n  if ('matchMedia' in window) return !!matchMedia('(pointer:coarse)').matches\n\n  if ('orientation' in window) return true\n\n  return isUserAgentMobile(navigator.userAgent)\n}\n\n/**\n * Check if the browser is Safari\n *\n * @returns boolean True if the browser is Safari, false otherwise\n */\nexport function isSafari() {\n  if (navigator.hasOwnProperty('vendor')) /apple/i.test(navigator.vendor)\n  return isUserAgentSafari(navigator.userAgent)\n}\n\n/**\n * Check if the browser is Safari on iOS\n * \n * @returns boolean True if the browser is Safari on iOS, false otherwise\n */\nexport function isIOSSafari() {\n  return isIOS() && isSafari()\n}\n\n/**\n * A wrapper for the matchMedia function, cause with `matchMedia` you can only either add a listener or check the media query\n * this function does both.\n * \n * @param {string} query The media query to check\n * @param {function} [callback] The callback function to call when the media query changes\n * @returns {boolean} The result of the media query\n * \n * @example\n * mediaMatcher('(min-width: 768px)', (matches) => {\n *  if (matches) {\n *    // Do something\n *  } else {\n *    // Do something else\n *  }\n * })\n * \n * // Or\n * \n * const isDesktop = mediaMatcher('(min-width: 768px)')\n */\nexport function mediaMatcher(query, callback) {\n  if (isFunction(callback)) {\n    matchMedia(query).addEventListener('change', (e) => {\n      callback(e.matches)\n    })\n\n    const mql = matchMedia(query)\n    callback(mql.matches)\n\n    return mql.matches\n  }\n\n  return matchMedia(query).matches\n}\n\n/**\n * Get the scrollbar width\n * \n * When preventing scroll with html overflow hidden the scroll bar will disappear and the whole page will shift (if the scroll bar is visible that is).\n * To substitute for the scrollbar width we can add a padding to the body element.\n * \n * @returns {number} The scrollbar width\n * \n * @example\n * const scrollbarWidth = getScrollbarWidth() // 15 (on MacOS X Safari)\n */\nexport function getScrollbarWidth() {\n  const scrollDiv = document.createElement('div')\n  \n  css(scrollDiv, {\n    width: '100px',\n    height: '100px',\n    position: 'absolute',\n    left: '-9999px',\n    zIndex: '0',\n    overflowX: 'hidden',\n    overflowY: 'scroll'\n  })\n\n  document.body.appendChild(scrollDiv)\n  const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth\n  document.body.removeChild(scrollDiv)\n  return scrollbarWidth\n}\n\n/**\n * Check if the vertical scrollbar is visible\n * \n * @param {number} [scrollbarWidth] The width of the scrollbar, defaults to getScrollbarWidth()\n * @returns {boolean} True if the vertical scrollbar is visible, false otherwise\n */\nexport function hasVerticalScrollbarVisible(scrollbarWidth) {\n  if (scrollbarWidth === undefined) scrollbarWidth = getScrollbarWidth()\n  return window.innerHeight < document.body.scrollHeight && scrollbarWidth > 0\n}\n\n/**\n * Check if the horizontal scrollbar is visible\n * \n * @param {number} [scrollbarWidth] The width of the scrollbar, defaults to getScrollbarWidth()\n * @returns {boolean} True if the horizontal scrollbar is visible, false otherwise\n */\nexport function hasHorizontalScrollbarVisible(scrollbarWidth) {\n  if (scrollbarWidth === undefined) scrollbarWidth = getScrollbarWidth()\n  return window.innerWidth < document.body.scrollWidth && scrollbarWidth > 0\n}\n\n/**\n * Disable the scroll on the page.\n * \n * @param {number} [shift=0] If greater than 0 the body will be shifted to the left by the width of the scrollbar, getScrollbarWidth() is used to provide this value  \n */\nexport function disableScroll(shift) {\n  const body = document.body\n  if (shift && hasVerticalScrollbarVisible(shift)) body.style.paddingRight = `${shift}px`\n  body.style.overflow = 'hidden'\n}\n\n/**\n * Enable the scroll on the page.\n * \n * @param {boolean} [shift=0] If greater than 0 the body will be shifted back to the left by the width of the scrollbar, getScrollbarWidth() is used to provide this value\n */\nexport function enableScroll(shift) {\n  const body = document.body\n  body.style.overflow = ''\n  if (shift) body.style.paddingRight = ''\n}\n\n/**\n * Parses a string of url query parameters into an object of key value pairs. Converts the values to the correct type.\n * \n * @param {string} [entryQuery] - Optional query string to parse, without the starting ?, defaults to window.location.search without the starting ?\n * @returns {object} of key value pairs\n * @example\n * // url: https://example.com/?test&foo=bar&baz=qux\n * getQueryProperties() // { test: undefined, foo: 'bar', baz: 'qux' }\n */\nexport function getQueryProperties(entryQuery) {\n  const query = entryQuery ? entryQuery : window.location.search.replace('?', '')\n  if (isEmpty(query)) return {}\n\n  return parseUrlParameters(query)\n}\n\n/**\n * Parses a string of url hash parameters into an object of key value pairs. Converts the values to the correct type.\n * \n * @param {string} [entryHash] - Optional hash string to parse, without the starting #, defaults to window.location.hash without the starting #\n * @returns {object} of key value pairs\n * @example\n * // url: https://example.com/#test&foo=bar&baz=qux\n * getHashProperties() // { test: undefined, foo: 'bar', baz: 'qux' }\n */\nexport function getHashProperties(entryHash) {\n  const hash = entryHash ? entryHash : window.location.hash.replace('#', '')\n  if (isEmpty(hash)) return {}\n\n  return parseUrlParameters(hash)\n}\n\nfunction onHashChange(callback) {\n  const hash = window.location.hash.replace('#', '')\n  if (!isEmpty(hash)) callback(hash)\n}\n\n/**\n * Add a callback function to the hash change event\n * \n * @param {function} callback - The callback function to call when the hash changes\n * @param {string} [single] - Optional string to make sure the listener is initialized only once, defaults to window[single] which is set to true after the first call\n * @example\n * hashChange((hash) => {\n * // Do something with the hash\n * })\n */\nexport function hashChange(callback, single) {\n  onHashChange(callback)\n  \n  if (single && window[single]) return\n  if (single) window[single] = true\n  \n  window.addEventListener('hashchange', () => {\n    onHashChange(callback)\n  })\n}\n", "import { isArray, stringToType } from 'book-of-spells';\n\nexport function hasClass(element, className) {\n  return element.classList.contains(className);\n}\n\nexport function addClass(element, classNames) {\n  const classes = classNames.split(' ');\n  element.classList.add(...classes);\n}\n\nexport function removeClass(element, classNames) {\n  const classes = classNames.split(' ');\n  element.classList.remove(...classes);\n}\n\nexport function toogleClass(element, className) {\n  element.classList.toggle(className);\n}\n\nexport function parseProperties(params, defaults, element, attr_prefix) {\n  let res_params = {};\n\n  if (!params) {\n    res_params = defaults;\n  } else {\n    for (let k in defaults) {\n      if (!params.hasOwnProperty(k)) {\n        //load in defaults if the param hasn't been set\n        res_params[k] = defaults[k];\n      }\n    }\n  }\n\n  if (!element) return res_params;\n  // load params from data attributes\n  for (let k in res_params) {\n    let data;\n\n    if (isArray(attr_prefix)) {\n      for (var i = 0; i < attr_prefix.length; i++) {\n        const temp_data = element.getAttribute(attr_prefix[i]+k);\n        if (temp_data) {\n          data = temp_data;\n          break;\n        }\n      }\n    } else {\n      data = element.getAttribute(attr_prefix+k);\n    }\n\n    if (data !== undefined && data !== null) {\n      res_params[k] = stringToType(data);\n    }\n  }\n\n  return res_params;\n};\n\nexport function generateActionButton(obj, props) {\n  const btn = document.createElement('button');\n  btn.className = props.className;\n  btn.innerHTML = props.innerHtml;\n  addClass(btn.firstChild, props.stateChildClassNames[0]);\n\n  //TODO: solve this with ARIA toggle states\n  if (obj.params[props.condition_parameter] === props.initialState) {\n    addClass(btn, props.stateClassName);\n    removeClass(btn.firstChild, props.stateChildClassNames[0]);\n    addClass(btn.firstChild, props.stateChildClassNames[1]);\n  }\n\n  btn.addEventListener('click', function(e) {\n    if (hasClass(this, props.stateClassName)) {\n      obj.state[props.name] = false;\n      obj[props.actions[0]]();\n    } else {\n      obj.state[props.name] = true;\n      obj[props.actions[1]]();\n    }\n  });\n\n  obj.buttons[props.name] = {\n    element: btn,\n    button_properties: props\n  };\n\n  obj.controls_element.appendChild(btn);\n};\n", "import { addClass, removeClass, parseProperties, generateActionButton } from './utils.js';\nimport { isMobile, parseResolutionString } from 'book-of-spells';\n\nexport function YoutubeBackground(elem, params, id, uid) {\n  this.is_mobile = isMobile();\n\n  this.element = elem;\n  this.ytid = id;\n  this.uid = uid;\n  this.element.setAttribute('data-vbg-uid', uid);\n  this.player = null;\n  this.buttons = {};\n  this.isIntersecting = false;\n\n  this.state = {};\n  this.state.playing = false;\n  this.state.muted = false;\n  this.state.volume_once = false;\n\n  this.params = {};\n\n  const DEFAULTS = {\n    'pause': false, //deprecated\n    'play-button': false,\n    'mute-button': false,\n    'autoplay': true,\n    'muted': true,\n    'loop': true,\n    'mobile': true,\n    'load-background': false,\n    'resolution': '16:9',\n    'onStatusChange': function() {},\n    'inline-styles': true,\n    'fit-box': false,\n    'offset': 200,\n    'start-at': 0,\n    'end-at': 0,\n    'poster': null,\n    'always-play': false,\n    'volume': 1,\n    'no-cookie': true\n  };\n\n  this.__init__ = function () {\n    this.injectScript();\n\n    if (!this.ytid) {\n      return;\n    }\n\n    this.params = parseProperties(params, DEFAULTS, this.element, ['data-ytbg-', 'data-vbg-']);\n    //pause deprecated\n    if (this.params.pause) {\n      this.params['play-button'] = this.params.pause;\n    }\n    this.params.resolution_mod = parseResolutionString(this.params.resolution);\n    this.state.playing = this.params.autoplay;\n    this.state.muted = this.params.muted;\n\n    this.buildHTML();\n\n    if (this.is_mobile && !this.params.mobile) {\n      return;\n    }\n\n    this.injectPlayer();\n\n\n    if (this.params['play-button']) {\n      generateActionButton(this, {\n        name: 'play',\n        className: 'play-toggle',\n        innerHtml: '<i class=\"fa\"></i>',\n        initialState: false,\n        stateClassName: 'paused',\n        condition_parameter: 'autoplay',\n        stateChildClassNames: ['fa-pause-circle', 'fa-play-circle'],\n        actions: ['play', 'pause']\n      });\n    }\n\n    if (this.params['mute-button']) {\n      generateActionButton(this, {\n        name: 'mute',\n        className: 'mute-toggle',\n        innerHtml: '<i class=\"fa\"></i>',\n        initialState: true,\n        stateClassName: 'muted',\n        condition_parameter: 'muted',\n        stateChildClassNames: ['fa-volume-up', 'fa-volume-mute'],\n        actions: ['unmute', 'mute']\n      });\n    }\n  };\n\n  this.__init__();\n}\n\nYoutubeBackground.prototype.initYTPlayer = function () {\n  const self = this;\n  if (window.hasOwnProperty('YT') && this.player === null) {\n    this.player = new YT.Player(this.uid, {\n      events: {\n        'onReady': function(event) {\n          self.onVideoPlayerReady(event);\n        },\n        'onStateChange': function(event) {\n          self.onVideoStateChange(event);\n        },\n        'onError' : function(event) {\n          //console.error('player_api', event);\n        }\n      }\n    });\n  }\n};\n\nYoutubeBackground.prototype.injectScript = function () {\n  if (window.hasOwnProperty('YT') || document.querySelector('script[src=\"https://www.youtube.com/player_api\"]')) return\n  const tag = document.createElement('script');\n  tag.src = \"https://www.youtube.com/player_api\";\n  const firstScriptTag = document.getElementsByTagName('script')[0];\n  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n};\n\nYoutubeBackground.prototype.seekTo = function (seconds, allowSeekAhead = true) {\n  this.player.seekTo(seconds, allowSeekAhead);\n}\n\nYoutubeBackground.prototype.onVideoPlayerReady = function (event) {\n  this.seekTo(this.params['start-at']);\n\n  if (this.params.autoplay && (this.params['always-play'] || this.isIntersecting)) {\n    this.player.playVideo();\n    this.element.dispatchEvent(new CustomEvent('video-background-play', { bubbles: true, detail: this }));\n  }\n\n  this.iframe.style.opacity = 1;\n};\n\nYoutubeBackground.prototype.onVideoStateChange = function (event) {\n  if (event.data === 0 && this.params.loop) {\n    this.seekTo(this.params['start-at']);\n    this.player.playVideo();\n  }\n\n  if (event.data === -1 && this.params.autoplay) {\n    this.seekTo(this.params['start-at']);\n    this.player.playVideo();\n    this.element.dispatchEvent(new CustomEvent('video-background-play', { bubbles: true, detail: this }));\n  }\n\n  this.params[\"onStatusChange\"](event);\n};\n\nYoutubeBackground.prototype.injectPlayer = function () {\n  this.iframe = document.createElement('iframe');\n  this.iframe.setAttribute('frameborder', 0);\n  this.iframe.setAttribute('allow', 'autoplay; mute');\n  let site = 'https://www.youtube.com/embed/';\n  if (this.params['no-cookie']) {\n    site = 'https://www.youtube-nocookie.com/embed/';\n  }\n  let src = `${site}${this.ytid}?&enablejsapi=1&disablekb=1&controls=0&rel=0&iv_load_policy=3&cc_load_policy=0&playsinline=1&showinfo=0&modestbranding=1&fs=0`;\n\n  if (this.params.muted) {\n    src += '&mute=1';\n  }\n\n  if (this.params.autoplay && this.params['always-play']) {\n    src += '&autoplay=1';\n  }\n\n  if (this.params.loop) {\n    src += '&loop=1';\n  }\n\n  if (this.params['end-at'] > 0) {\n    src += `&end=${this.params['end-at']}`;\n  }\n\n  this.iframe.src = src;\n\n  if (this.uid) {\n    this.iframe.id = this.uid;\n  }\n\n  if (this.params['inline-styles']) {\n    this.iframe.style.top = '50%';\n    this.iframe.style.left = '50%';\n    this.iframe.style.transform = 'translateX(-50%) translateY(-50%)';\n    this.iframe.style.position = 'absolute';\n    this.iframe.style.opacity = 0;\n  }\n\n  this.element.appendChild(this.iframe);\n\n  if (this.params['fit-box']) {\n    this.iframe.style.width = '100%';\n    this.iframe.style.height = '100%';\n  } else {\n    const self = this;\n\n    //TODO\u2757\uFE0F: maybe a spacer or at least add requestAnimationFrame\n    function onResize() {\n      const h = self.iframe.parentNode.offsetHeight + self.params.offset; // since showinfo is deprecated and ignored after September 25, 2018. we add +200 to hide it in the overflow\n      const w = self.iframe.parentNode.offsetWidth + self.params.offset;\n      const res = self.params.resolution_mod;\n\n      if (res > w/h) {\n        self.iframe.style.width = h*res + 'px';\n        self.iframe.style.height = h + 'px';\n      } else {\n        self.iframe.style.width = w + 'px';\n        self.iframe.style.height = w/res + 'px';\n      }\n    }\n\n    if (window.hasOwnProperty('ResizeObserver')) {\n      const resize_observer = new ResizeObserver(() => {\n        window.requestAnimationFrame(onResize);\n      });\n      resize_observer.observe(this.element);\n    } else {\n      window.addEventListener('resize', () => {\n        window.requestAnimationFrame(onResize);\n      });\n    }\n    onResize();\n  }\n};\n\nYoutubeBackground.prototype.buildHTML = function () {\n  const parent = this.element.parentNode;\n  // wrap\n  addClass(this.element, 'youtube-background video-background');\n\n  //set css rules\n  const wrapper_styles = {\n    \"height\" : \"100%\",\n    \"width\" : \"100%\",\n    \"z-index\": \"0\",\n    \"position\": \"absolute\",\n    \"overflow\": \"hidden\",\n    \"top\": 0, // added by @insad\n    \"left\": 0,\n    \"bottom\": 0,\n    \"right\": 0\n  };\n\n  if (!this.params['mute-button']) {\n    wrapper_styles[\"pointer-events\"] = \"none\" // avoid right mouse click popup menu\n  }\n\n  if (this.params['load-background'] || this.params['poster']) {\n    if (this.params['load-background']) wrapper_styles['background-image'] = 'url(https://img.youtube.com/vi/'+this.ytid+'/hqdefault.jpg)';\n    if (this.params['poster']) wrapper_styles['background-image'] = this.params['poster'];\n    wrapper_styles['background-size'] = 'cover';\n    wrapper_styles['background-repeat'] = 'no-repeat';\n    wrapper_styles['background-position'] = 'center';\n  }\n\n  if (this.params['inline-styles']) {\n    for (let property in wrapper_styles) {\n      this.element.style[property] = wrapper_styles[property];\n    }\n\n    if (!['absolute', 'fixed', 'relative', 'sticky'].indexOf(parent.style.position)) {\n      parent.style.position = 'relative';\n    }\n  }\n\n  // set play/mute controls wrap\n  if (this.params['play-button'] || this.params['mute-button']) {\n    const controls = document.createElement('div');\n    controls.className = 'video-background-controls';\n\n    controls.style.position = 'absolute';\n    controls.style.top = '10px';\n    controls.style.right = '10px';\n    controls.style['z-index'] = 2;\n\n    this.controls_element = controls;\n    parent.appendChild(controls);\n  }\n\n  return this.element;\n};\n\nYoutubeBackground.prototype.softPause = function () {\n  if (!this.state.playing || !this.player) return;\n  this.player.pauseVideo();\n  this.element.dispatchEvent(new CustomEvent('video-background-pause', { bubbles: true, detail: this }));\n};\n\nYoutubeBackground.prototype.softPlay = function () {\n  if (!this.state.playing || !this.player) return;\n  this.player.playVideo();\n  this.element.dispatchEvent(new CustomEvent('video-background-play', { bubbles: true, detail: this }));\n};\n\nYoutubeBackground.prototype.play = function () {\n  if (!this.player) return;\n  //TODO: solve this with ARIA toggle states. P.S. warning repetitive code!!!\n  if (this.buttons.hasOwnProperty('play')) {\n    const btn_obj = this.buttons.play;\n    removeClass(btn_obj.element, btn_obj.button_properties.stateClassName);\n    addClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[0])\n    removeClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[1]);\n  }\n\n  this.state.playing = true;\n\n  if (this.params['start-at'] && this.player.getCurrentTime() < this.params['start-at'] ) {\n    this.seekTo(this.params['start-at']);\n  }\n  this.player.playVideo();\n  this.element.dispatchEvent(new CustomEvent('video-background-play', { bubbles: true, detail: this }));\n}\n\nYoutubeBackground.prototype.pause = function () {\n  if (!this.player) return;\n  //TODO: solve this with ARIA toggle states\n  if (this.buttons.hasOwnProperty('play')) {\n    const btn_obj = this.buttons.play;\n    addClass(btn_obj.element, btn_obj.button_properties.stateClassName);\n    removeClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[0])\n    addClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[1]);\n  }\n\n  this.state.playing = false;\n\n  this.player.pauseVideo();\n  this.element.dispatchEvent(new CustomEvent('video-background-pause', { bubbles: true, detail: this }));\n}\n\nYoutubeBackground.prototype.unmute = function () {\n  if (!this.player) return;\n\n  //TODO: solve this with ARIA toggle states\n  if (this.buttons.hasOwnProperty('mute')) {\n    const btn_obj = this.buttons.mute;\n    removeClass(btn_obj.element, btn_obj.button_properties.stateClassName);\n    addClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[0])\n    removeClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[1]);\n  }\n\n  this.state.muted = false;\n\n  if (!this.state.volume_once) {\n    this.state.volume_once = true;\n    this.setVolume(this.params.volume);\n  }\n  this.player.unMute();\n  this.element.dispatchEvent(new CustomEvent('video-background-unmute', { bubbles: true, detail: this }));\n}\n\nYoutubeBackground.prototype.mute = function () {\n  if (!this.player) return;\n\n  //TODO: solve this with ARIA toggle states\n  if (this.buttons.hasOwnProperty('mute')) {\n    const btn_obj = this.buttons.mute;\n    addClass(btn_obj.element, btn_obj.button_properties.stateClassName);\n    removeClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[0])\n    addClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[1]);\n  }\n\n  this.state.muted = true;\n\n  this.player.mute();\n  this.element.dispatchEvent(new CustomEvent('video-background-mute', { bubbles: true, detail: this }));\n}\n\nYoutubeBackground.prototype.setVolume = function (volume) {\n  if (!this.player) return;\n  \n  this.player.setVolume(volume * 100);\n  this.element.dispatchEvent(new CustomEvent('video-background-volume-change', { bubbles: true, detail: this }));\n};\n", "import { addClass, removeClass, parseProperties, generateActionButton } from './utils.js';\nimport { isMobile, parseResolutionString } from 'book-of-spells';\n\nexport function VimeoBackground(elem, params, id, uid) {\n  this.is_mobile = isMobile();\n\n  this.element = elem;\n  this.vid = id;\n  this.uid = uid;\n  this.element.setAttribute('data-vbg-uid', uid);\n  this.player = null;\n  this.buttons = {};\n\n  this.state = {};\n  this.state.playing = false;\n  this.state.muted = false;\n  this.state.volume_once = false;\n\n  this.params = {};\n\n  const DEFAULTS = {\n    'pause': false, //deprecated\n    'play-button': false,\n    'mute-button': false,\n    'autoplay': true,\n    'muted': true,\n    'loop': true,\n    'mobile': true,\n    'load-background': false,\n    'resolution': '16:9',\n    'inline-styles': true,\n    'fit-box': false,\n    'offset': 200,\n    'start-at': 0,\n    'end-at': 0,\n    'poster': null,\n    'always-play': false,\n    'volume': 1,\n    'no-cookie': true,\n  };\n\n  this.__init__ = function () {\n    this.injectScript();\n\n    if (!this.vid) {\n      return;\n    }\n\n    this.params = parseProperties(params, DEFAULTS, this.element, ['data-ytbg-', 'data-vbg-']);\n    \n    //pause deprecated\n    if (this.params.pause) {\n      this.params['play-button'] = this.params.pause;\n    }\n    this.params.resolution_mod = parseResolutionString(this.params.resolution);\n    this.state.playing = this.params.autoplay;\n    this.state.muted = this.params.muted;\n\n    this.buildHTML();\n\n    if (this.is_mobile && !this.params.mobile) {\n      return;\n    }\n\n    this.injectPlayer();\n\n    if (this.params['play-button']) {\n      generateActionButton(this, {\n        name: 'play',\n        className: 'play-toggle',\n        innerHtml: '<i class=\"fa\"></i>',\n        initialState: false,\n        stateClassName: 'paused',\n        condition_parameter: 'autoplay',\n        stateChildClassNames: ['fa-pause-circle', 'fa-play-circle'],\n        actions: ['play', 'pause']\n      });\n    }\n\n    if (this.params['mute-button']) {\n      generateActionButton(this, {\n        name: 'mute',\n        className: 'mute-toggle',\n        innerHtml: '<i class=\"fa\"></i>',\n        initialState: true,\n        stateClassName: 'muted',\n        condition_parameter: 'muted',\n        stateChildClassNames: ['fa-volume-up', 'fa-volume-mute'],\n        actions: ['unmute', 'mute']\n      });\n    }\n  };\n\n  this.__init__();\n}\n\nVimeoBackground.prototype.injectScript = function () {\n  if (window.hasOwnProperty('Vimeo') || document.querySelector('script[src=\"https://player.vimeo.com/api/player.js\"]')) return;\n  const tag = document.createElement('script');\n  if (window.hasOwnProperty('onVimeoIframeAPIReady') && typeof window.onVimeoIframeAPIReady === 'function') tag.addEventListener('load', () => {\n    window.onVimeoIframeAPIReady();\n  });\n  tag.src = 'https://player.vimeo.com/api/player.js';\n  const firstScriptTag = document.getElementsByTagName('script')[0];\n  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n};\n\nVimeoBackground.prototype.initVimeoPlayer = function () {\n  if (window.hasOwnProperty('Vimeo') && this.player === null) {\n    this.player = new Vimeo.Player(this.iframe);\n\n    this.player.on('loaded', this.onVideoPlayerReady.bind(this));\n    this.player.on('ended', this.onVideoEnded.bind(this));\n    \n    if (this.params['end-at'] > 0) this.player.on('timeupdate', this.onVideoProgress.bind(this));\n    if (this.params.volume !== 1 && !this.params.muted) this.setVolume(this.params.volume);\n  }\n};\n\nVimeoBackground.prototype.seekTo = function (time) {\n  this.player.setCurrentTime(time);\n};\n\n\nVimeoBackground.prototype.onVideoPlayerReady = function (event) {\n  this.seekTo(this.params['start-at']);\n  if (this.params.autoplay && (this.params['always-play'] || this.isIntersecting)) {\n    this.player.play();\n    this.element.dispatchEvent(new CustomEvent('video-background-play', { bubbles: true, detail: this }));\n  }\n\n  this.iframe.style.opacity = 1;\n};\n\nVimeoBackground.prototype.onVideoEnded = function (event) {\n  if (this.params['start-at'] && this.params.loop) {\n    this.seekTo(this.params['start-at']);\n    this.player.play();\n  }\n};\n\nVimeoBackground.prototype.onVideoProgress = function (event) {\n  if (event.seconds >= this.params['end-at']) {\n    this.seekTo(this.params['start-at']);\n    if (!this.params.loop) this.pause();\n  }\n};\n\nVimeoBackground.prototype.injectPlayer = function () {\n  this.iframe = document.createElement('iframe');\n  this.iframe.setAttribute('frameborder', 0);\n  this.iframe.setAttribute('allow', ['autoplay; mute']);\n  let src = 'https://player.vimeo.com/video/'+this.vid+'?background=1&controls=0';\n\n  if (this.params.muted) {\n    src += '&muted=1';\n  }\n\n  if (this.params.autoplay && this.params['always-play']) {\n    src += '&autoplay=1';\n  }\n\n  if (this.params.loop) {\n    src += '&loop=1&autopause=0';\n  }\n\n  if (this.params['no-cookie']) {\n    src += '&dnt=1';\n  }\n\n  //WARN\u2757\uFE0F this is a hash not a query param\n  if (this.params['start-at']) {\n    src += '#t=' + this.params['start-at'] + 's';\n  }\n\n  this.iframe.src = src;\n\n  if (this.uid) {\n    this.iframe.id = this.uid;\n  }\n\n  if (this.params['inline-styles']) {\n    this.iframe.style.top = '50%';\n    this.iframe.style.left = '50%';\n    this.iframe.style.transform = 'translateX(-50%) translateY(-50%)';\n    this.iframe.style.position = 'absolute';\n    this.iframe.style.opacity = 1;\n  }\n\n  this.element.appendChild(this.iframe);\n\n  if (this.params['fit-box']) {\n    this.iframe.style.width = '100%';\n    this.iframe.style.height = '100%';\n  } else {\n    const self = this;\n\n    const onResize = function() {\n      const h = self.iframe.parentNode.offsetHeight + self.params.offset; // since showinfo is deprecated and ignored after September 25, 2018. we add +200 to hide it in the overflow\n      const w = self.iframe.parentNode.offsetWidth + self.params.offset;\n      const res = self.params.resolution_mod;\n\n      if (res > w/h) {\n        self.iframe.style.width = h*res + 'px';\n        self.iframe.style.height = h + 'px';\n      } else {\n        self.iframe.style.width = w + 'px';\n        self.iframe.style.height = w/res + 'px';\n      }\n    };\n\n    if (window.hasOwnProperty('ResizeObserver')) {\n      const resize_observer = new ResizeObserver(() => {\n        window.requestAnimationFrame(onResize);\n      });\n      resize_observer.observe(this.element);\n    } else {\n      window.addEventListener('resize', () => {\n        window.requestAnimationFrame(onResize);\n      });\n    }\n    onResize();\n  }\n  \n};\n\nVimeoBackground.prototype.buildHTML = function () {\n  const parent = this.element.parentNode;\n  // wrap\n  addClass(this.element, 'youtube-background');\n\n  //set css rules\n  const wrapper_styles = {\n    \"height\" : \"100%\",\n    \"width\" : \"100%\",\n    \"z-index\": \"0\",\n    \"position\": \"absolute\",\n    \"overflow\": \"hidden\",\n    \"top\": 0, // added by @insad\n    \"left\": 0,\n    \"bottom\": 0,\n    \"right\": 0\n  };\n\n  if (this.params['load-background'] || this.params['poster']) {\n    if (this.params['load-background']) wrapper_styles['background-image'] = 'url(https://vumbnail.com/'+this.vid+'.jpg)';\n    if (this.params['poster']) wrapper_styles['background-image'] = `url(${this.params['poster']})`;\n    wrapper_styles['background-size'] = 'cover';\n    wrapper_styles['background-repeat'] = 'no-repeat';\n    wrapper_styles['background-position'] = 'center';\n  }\n\n  if (!this.params['mute-button']) {\n    wrapper_styles[\"pointer-events\"] = \"none\"; // avoid right mouse click popup menu\n  }\n\n  if (this.params['inline-styles']) {\n    for (let property in wrapper_styles) {\n      this.element.style[property] = wrapper_styles[property];\n    }\n\n    if (!['absolute', 'fixed', 'relative', 'sticky'].indexOf(parent.style.position)) {\n      parent.style.position = 'relative';\n    }\n  }\n\n  // set play/mute controls wrap\n  if (this.params['play-button'] || this.params['mute-button']) {\n    const controls = document.createElement('div');\n    controls.className = 'video-background-controls';\n\n    controls.style.position = 'absolute';\n    controls.style.top = '10px';\n    controls.style.right = '10px';\n    controls.style['z-index'] = 2;\n\n    this.controls_element = controls;\n    parent.appendChild(controls);\n  }\n\n  return this.element;\n};\n\nVimeoBackground.prototype.softPause = function () {\n  if (!this.state.playing || !this.player) return;\n  this.player.pause();\n  this.element.dispatchEvent(new CustomEvent('video-background-pause', { bubbles: true, detail: this }));\n};\n\nVimeoBackground.prototype.softPlay = function () {\n  if (!this.state.playing || !this.player) return;\n  this.player.play();\n  this.element.dispatchEvent(new CustomEvent('video-background-play', { bubbles: true, detail: this }));\n};\n\nVimeoBackground.prototype.play = function () {\n  if (!this.player) return;\n\n  //TODO: solve this with ARIA toggle states. P.S. warning repetitive code!!!\n  if (this.buttons.hasOwnProperty('play')) {\n    const btn_obj = this.buttons.play;\n    removeClass(btn_obj.element, btn_obj.button_properties.stateClassName);\n    addClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[0])\n    removeClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[1]);\n  }\n\n  if (this.params['start-at'] || this.params['end-at']) {\n    const self = this;\n    this.player.getCurrentTime().then(function(seconds) {\n      if (self.params['start-at'] && seconds < self.params['start-at']) {\n        self.seekTo(self.params['start-at']);\n      }\n\n      if (self.params['end-at'] && seconds > self.params['end-at']) {\n        self.seekTo(self.params['start-at']);\n      }\n    });\n  }\n  \n  this.state.playing = true;\n  \n  this.player.play();\n  this.element.dispatchEvent(new CustomEvent('video-background-play', { bubbles: true, detail: this }));\n};\n\nVimeoBackground.prototype.pause = function () {\n  if (!this.player) return;\n\n  //TODO: solve this with ARIA toggle states\n  if (this.buttons.hasOwnProperty('play')) {\n    const btn_obj = this.buttons.play;\n    addClass(btn_obj.element, btn_obj.button_properties.stateClassName);\n    removeClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[0])\n    addClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[1]);\n  }\n\n  this.state.playing = false;\n\n  this.player.pause();\n  this.element.dispatchEvent(new CustomEvent('video-background-pause', { bubbles: true, detail: this }));\n};\n\nVimeoBackground.prototype.unmute = function () {\n  if (!this.player) return;\n\n  //TODO: solve this with ARIA toggle states\n  if (this.buttons.hasOwnProperty('mute')) {\n    const btn_obj = this.buttons.mute;\n    removeClass(btn_obj.element, btn_obj.button_properties.stateClassName);\n    addClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[0])\n    removeClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[1]);\n  }\n\n  this.state.muted = false;\n\n  if (!this.state.volume_once) {\n    this.state.volume_once = true;\n    this.setVolume(this.params.volume);\n  }\n  this.player.setMuted(false);\n  this.element.dispatchEvent(new CustomEvent('video-background-unmute', { bubbles: true, detail: this }));\n};\n\nVimeoBackground.prototype.mute = function () {\n  if (!this.player) return;\n\n  //TODO: solve this with ARIA toggle states\n  if (this.buttons.hasOwnProperty('mute')) {\n    const btn_obj = this.buttons.mute;\n    addClass(btn_obj.element, btn_obj.button_properties.stateClassName);\n    removeClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[0])\n    addClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[1]);\n  }\n\n  this.state.muted = true;\n\n  this.player.setMuted(true);\n  this.element.dispatchEvent(new CustomEvent('video-background-mute', { bubbles: true, detail: this }));\n};\n\nVimeoBackground.prototype.setVolume = function(volume) {\n  if (!this.player) return;\n\n  this.player.setVolume(volume);\n  this.element.dispatchEvent(new CustomEvent('video-background-volume-change', { bubbles: true, detail: this }));\n};\n", "import { addClass, removeClass, parseProperties, generateActionButton } from './utils.js';\nimport { isMobile, parseResolutionString } from 'book-of-spells';\n\nexport function VideoBackground(elem, params, vid_data, uid) {\n  this.is_mobile = isMobile();\n\n  this.element = elem;\n  this.link = vid_data.link;\n  this.ext = /(?:\\.([^.]+))?$/.exec(vid_data.id)[1];\n  this.uid = uid;\n  this.element.setAttribute('data-vbg-uid', uid);\n  this.player = null;\n  this.buttons = {};\n\n  this.state = {};\n  this.state.playing = false;\n  this.state.muted = false;\n  this.state.volume_once = false;\n\n  this.params = {};\n\n  this.ready = false;\n\n  const MIME_MAP = {\n    'ogv' : 'video/ogg',\n    'ogm' : 'video/ogg',\n    'ogg' : 'video/ogg',\n    'avi' : 'video/avi',\n    'mp4' : 'video/mp4',\n    'webm' : 'video/webm'\n  };\n\n  const DEFAULTS = {\n    'pause': false, //deprecated\n    'play-button': false,\n    'mute-button': false,\n    'autoplay': true,\n    'muted': true,\n    'loop': true,\n    'mobile': true,\n    'resolution': '16:9',\n    'inline-styles': true,\n    'fit-box': false,\n    'offset': 200,\n    'start-at': 0,\n    'end-at': 0,\n    'poster': null,\n    'always-play': false,\n    'volume': 1\n  };\n\n  this.__init__ = function () {\n    if (!this.link || !this.ext) {\n      return;\n    }\n\n    this.mime = MIME_MAP[this.ext.toLowerCase()];\n    this.params = parseProperties(params, DEFAULTS, this.element, ['data-ytbg-', 'data-vbg-']);\n    //pause deprecated\n    if (this.params.pause) {\n      this.params['play-button'] = this.params.pause;\n    }\n    this.params.resolution_mod = parseResolutionString(this.params.resolution);\n    this.state.playing = this.params.autoplay;\n    this.state.muted = this.params.muted;\n\n    this.buildHTML();\n    this.injectPlayer();\n\n\n    if (this.params['play-button']) {\n      generateActionButton(this, {\n        name: 'play',\n        className: 'play-toggle',\n        innerHtml: '<i class=\"fa\"></i>',\n        initialState: false,\n        stateClassName: 'paused',\n        condition_parameter: 'autoplay',\n        stateChildClassNames: ['fa-pause-circle', 'fa-play-circle'],\n        actions: ['play', 'pause']\n      });\n    }\n\n    if (this.params['mute-button']) {\n      generateActionButton(this, {\n        name: 'mute',\n        className: 'mute-toggle',\n        innerHtml: '<i class=\"fa\"></i>',\n        initialState: true,\n        stateClassName: 'muted',\n        condition_parameter: 'muted',\n        stateChildClassNames: ['fa-volume-up', 'fa-volume-mute'],\n        actions: ['unmute', 'mute']\n      });\n    }\n  }\n\n  this.__init__();\n}\n\nVideoBackground.prototype.seekTo = function (seconds) {\n  if (this.player.hasOwnProperty('fastSeek')) {\n    this.player.fastSeek(seconds);\n    return;\n  }\n  this.player.currentTime = seconds;\n}\n\nVideoBackground.prototype.injectPlayer = function () {\n  this.player = document.createElement('video');\n  this.player.toggleAttribute('playsinline', true);\n  this.player.toggleAttribute('loop', this.params.loop);\n  this.player.toggleAttribute('autoplay', this.params.autoplay && (this.params['always-play'] || this.isIntersecting));\n  this.player.toggleAttribute('muted', this.params.muted);\n\n  if (this.params.volume !== 1 && !this.params.muted) this.setVolume(this.params.volume);\n\n  this.player.setAttribute('id', this.uid)\n\n  if (this.params['inline-styles']) {\n    this.player.style.top = '50%';\n    this.player.style.left = '50%';\n    this.player.style.transform = 'translateX(-50%) translateY(-50%)';\n    this.player.style.position = 'absolute';\n    this.player.style.opacity = 0;\n\n    this.player.addEventListener('canplay', (e) => {\n      e.target.style.opacity = 1;\n    });\n  }\n\n  const self = this;\n\n  if (this.params['start-at'] && this.params.autoplay) {\n    this.player.addEventListener('canplay', (e) => {\n      self.seekTo(this.params['start-at']);\n    }, { once: true });\n  }\n\n  if (this.params['end-at']) {\n    this.player.addEventListener('timeupdate', (e) => {\n      if (self.player.currentTime >= self.params['end-at']) {\n        self.seekTo(this.params['start-at']);\n      }\n    });\n  }\n\n  const source = document.createElement('source');\n  source.setAttribute('src', this.link);\n  source.setAttribute('type', this.mime);\n  this.player.appendChild(source);\n  this.element.appendChild(this.player);\n\n  if (this.params['fit-box']) {\n    this.player.style.width = '100%';\n    this.player.style.height = '100%';\n  } else {\n    //TODO\u2757\uFE0F: maybe a spacer or at least add requestAnimationFrame\n    function onResize() {\n      const h = self.player.parentNode.offsetHeight + self.params.offset; // since showinfo is deprecated and ignored after September 25, 2018. we add +200 to hide it in the overflow\n      const w = self.player.parentNode.offsetWidth + self.params.offset;\n      const res = self.params.resolution_mod;\n\n      if (res > w/h) {\n        self.player.style.width = h*res + 'px';\n        self.player.style.height = h + 'px';\n      } else {\n        self.player.style.width = w + 'px';\n        self.player.style.height = w/res + 'px';\n      }\n    }\n\n    if (window.hasOwnProperty('ResizeObserver')) {\n      const resize_observer = new ResizeObserver(() => {\n        window.requestAnimationFrame(onResize);\n      });\n      resize_observer.observe(this.element);\n    } else {\n      window.addEventListener('resize', () => {\n        window.requestAnimationFrame(onResize);\n      });\n    }\n    onResize();\n  }\n};\n\nVideoBackground.prototype.buildHTML = function () {\n  const parent = this.element.parentNode;\n  // wrap\n  addClass(this.element, 'video-background');\n\n  //set css rules\n  const wrapper_styles = {\n    \"height\" : \"100%\",\n    \"width\" : \"100%\",\n    \"z-index\": \"0\",\n    \"position\": \"absolute\",\n    \"overflow\": \"hidden\",\n    \"top\": 0, // added by @insad\n    \"left\": 0,\n    \"bottom\": 0,\n    \"right\": 0\n  };\n\n  if (!this.params['mute-button']) {\n    wrapper_styles[\"pointer-events\"] = \"none\" // avoid right mouse click popup menu\n  }\n\n  if (this.params['poster']) {\n    if (this.params['poster']) wrapper_styles['background-image'] = `url('${this.params['poster']}')`;\n    wrapper_styles['background-size'] = 'cover';\n    wrapper_styles['background-repeat'] = 'no-repeat';\n    wrapper_styles['background-position'] = 'center';\n  }\n\n  if (this.params['inline-styles']) {\n    for (let property in wrapper_styles) {\n      this.element.style[property] = wrapper_styles[property];\n    }\n\n    if (!['absolute', 'fixed', 'relative', 'sticky'].indexOf(parent.style.position)) {\n      parent.style.position = 'relative';\n    }\n  }\n\n  // set play/mute controls wrap\n  if (this.params['play-button'] || this.params['mute-button']) {\n    const controls = document.createElement('div');\n    controls.className = 'video-background-controls';\n\n    controls.style.position = 'absolute';\n    controls.style.top = '10px';\n    controls.style.right = '10px';\n    controls.style['z-index'] = 2;\n\n    this.controls_element = controls;\n    parent.appendChild(controls);\n  }\n\n  return this.element;\n};\n\nVideoBackground.prototype.softPause = function () {\n  if (!this.state.playing || !this.player) return;\n  this.player.pause();\n  this.element.dispatchEvent(new CustomEvent('video-background-pause', { bubbles: true, detail: this }));\n};\n\nVideoBackground.prototype.softPlay = function () {\n  if (!this.state.playing || !this.player) return;\n  this.player.play();\n  this.element.dispatchEvent(new CustomEvent('video-background-play', { bubbles: true, detail: this }));\n};\n\nVideoBackground.prototype.play = function () {\n  if (!this.player) return;\n  //TODO: solve this with ARIA toggle states. P.S. warning repetitive code!!!\n  if (this.buttons.hasOwnProperty('play')) {\n    const btn_obj = this.buttons.play;\n    removeClass(btn_obj.element, btn_obj.button_properties.stateClassName);\n    addClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[0])\n    removeClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[1]);\n  }\n\n  if (this.params['start-at'] || this.params['end-at']) {\n    const seconds = this.player.currentTime;\n    if (this.params['start-at'] && seconds < this.params['start-at']) {\n      this.seekTo(self.params['start-at']);\n    }\n\n    if (this.params['end-at'] && seconds > this.params['end-at']) {\n      this.seekTo(self.params['start-at']);\n    }\n  }\n\n  this.state.playing = true;\n\n  this.player.play();\n  this.element.dispatchEvent(new CustomEvent('video-background-play', { bubbles: true, detail: this }));\n}\n\nVideoBackground.prototype.pause = function () {\n  if (!this.player) return;\n  //TODO: solve this with ARIA toggle states\n  if (this.buttons.hasOwnProperty('play')) {\n    const btn_obj = this.buttons.play;\n    addClass(btn_obj.element, btn_obj.button_properties.stateClassName);\n    removeClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[0])\n    addClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[1]);\n  }\n\n  this.state.playing = false;\n\n  this.player.pause();\n  this.element.dispatchEvent(new CustomEvent('video-background-pause', { bubbles: true, detail: this }));\n}\n\nVideoBackground.prototype.unmute = function () {\n  if (!this.player) return;\n  //TODO: solve this with ARIA toggle states\n  if (this.buttons.hasOwnProperty('mute')) {\n    const btn_obj = this.buttons.mute;\n    removeClass(btn_obj.element, btn_obj.button_properties.stateClassName);\n    addClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[0])\n    removeClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[1]);\n  }\n\n  this.state.muted = false;\n\n  this.player.muted = false;\n  if (!this.state.volume_once) {\n    this.state.volume_once = true;\n    this.setVolume(this.params.volume);\n  }\n  this.element.dispatchEvent(new CustomEvent('video-background-unmute', { bubbles: true, detail: this }));\n}\n\nVideoBackground.prototype.mute = function () {\n  if (!this.player) return;\n  //TODO: solve this with ARIA toggle states\n  if (this.buttons.hasOwnProperty('mute')) {\n    const btn_obj = this.buttons.mute;\n    addClass(btn_obj.element, btn_obj.button_properties.stateClassName);\n    removeClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[0])\n    addClass(btn_obj.element.firstChild, btn_obj.button_properties.stateChildClassNames[1]);\n  }\n\n  this.state.muted = true;\n\n  this.player.muted = true;\n  this.element.dispatchEvent(new CustomEvent('video-background-mute', { bubbles: true, detail: this }));\n}\n\nVideoBackground.prototype.setVolume = function(volume) {\n  if (!this.player) return;\n\n  this.player.volume = volume;\n  this.element.dispatchEvent(new CustomEvent('video-background-volume-change', { bubbles: true, detail: this }));\n};\n", "import { YoutubeBackground } from './lib/youtube-background.js';\nimport { VimeoBackground } from './lib/vimeo-background.js';\nimport { VideoBackground } from './lib/video-background.js';\n\nimport { randomIntInclusive, RE_VIDEO, RE_VIMEO, RE_YOUTUBE } from 'book-of-spells';\n\nexport function VideoBackgrounds(selector, params) {\n  this.elements = selector;\n\n  if (typeof selector === 'string') {\n    this.elements = document.querySelectorAll(selector);\n  }\n\n  this.index = {};\n  this.re = {};\n  this.re.YOUTUBE = RE_YOUTUBE;\n  this.re.VIMEO = RE_VIMEO;\n  this.re.VIDEO = RE_VIDEO;\n\n  this.__init__ = function () {\n    const self = this;\n\n    this.intersectionObserver = new IntersectionObserver(function (entries) {\n      entries.forEach(function (entry) {\n        const uid = entry.target.getAttribute('data-vbg-uid');\n\n        if (uid && self.index.hasOwnProperty(uid) && entry.isIntersecting) {\n          self.index[uid].isIntersecting = true;\n          try {\n            if (self.index[uid].player && self.index[uid].params.autoplay) self.index[uid].softPlay();\n          } catch (e) {\n            // console.log(e);\n          }\n        } else {\n          self.index[uid].isIntersecting = false;\n          try {\n            if (self.index[uid].player) self.index[uid].softPause();\n          } catch (e) {\n            // console.log(e);\n          }\n        }\n      });\n    });       \n    \n    this.initPlayers();\n\n    for (let i = 0; i < this.elements.length; i++) {\n      const element = this.elements[i];\n      this.add(element, params);\n    }\n  };\n\n  this.__init__();\n}\n\nVideoBackgrounds.prototype.add = function (element, params) {\n  const link = element.getAttribute('data-youtube') || element.getAttribute('data-vbg');\n  const vid_data = this.getVidID(link);\n\n  if (!vid_data) {\n    return;\n  }\n\n  const uid = this.generateUID(vid_data.id);\n\n  if (!uid) {\n    return;\n  }\n\n  switch (vid_data.type) {\n    case 'YOUTUBE':\n      const yb = new YoutubeBackground(element, params, vid_data.id, uid);\n      this.index[uid] = yb;\n      break;\n    case 'VIMEO':\n      const vm = new VimeoBackground(element, params, vid_data.id, uid);\n      this.index[uid] = vm;\n      break;\n    case 'VIDEO':\n      const vid = new VideoBackground(element, params, vid_data, uid);\n      this.index[uid] = vid;\n      break;\n  }\n\n  if (!this.index[uid].params['always-play']) {\n    this.intersectionObserver.observe(this.index[uid].element);\n  }\n};\n\nVideoBackgrounds.prototype.getVidID = function (link) {\n  if (link !== undefined && link !== null) {\n    for (let k in this.re) {\n      const pts = link.match(this.re[k]);\n\n      if (pts && pts.length) {\n        this.re[k].lastIndex = 0;\n        return {\n          id: pts[1],\n          type: k,\n          regex_pts: pts,\n          link: link\n        };\n      }\n    }\n  }\n\n  return null;\n};\n\n\nVideoBackgrounds.prototype.generateUID = function (pref) {\n  //index the instance\n  let uid = pref +'-'+ randomIntInclusive(0, 9999);\n  while (this.index.hasOwnProperty(uid)) {\n    uid = pref +'-'+ randomIntInclusive(0, 9999);\n  }\n\n  return uid;\n};\n\nVideoBackgrounds.prototype.pauseVideos = function () {\n  for (let k in this.index) {\n    this.index[k].pause();\n  }\n};\n\nVideoBackgrounds.prototype.playVideos = function () {\n  for (let k in this.index) {\n    this.index[k].play();\n  }\n};\n\nVideoBackgrounds.prototype.initPlayers = function (callback) {\n  const self = this;\n\n  window.onYouTubeIframeAPIReady = function () {\n    for (let k in self.index) {\n      if (self.index[k] instanceof YoutubeBackground) {\n        self.index[k].initYTPlayer();\n      }\n    }\n\n    if (callback) {\n      setTimeout(callback, 100);\n    }\n  };\n\n  if (window.hasOwnProperty('YT') && window.YT.loaded) {\n    window.onYouTubeIframeAPIReady();\n  }\n\n  window.onVimeoIframeAPIReady = function () {\n    for (let k in self.index) {\n      if (self.index[k] instanceof VimeoBackground) {\n        self.index[k].initVimeoPlayer();\n      }\n    }\n\n    if (callback) {\n      setTimeout(callback, 100);\n    }\n  }\n\n  if (window.hasOwnProperty('Vimeo') && window.Vimeo.hasOwnProperty('Player')) {\n    window.onVimeoIframeAPIReady();\n  }\n};\n", "import { VideoBackgrounds } from './video-backgrounds.js';\n\nif (typeof jQuery == 'function') {\n  (function ($) {\n    $.fn.youtube_background = function (params) {\n      const $this = $(this);\n      if (window.hasOwnProperty('VIDEO_BACKGROUNDS')) {\n        window.VIDEO_BACKGROUNDS.add($this, params);\n        return $this;\n      }\n      window.VIDEO_BACKGROUNDS = new VideoBackgrounds(this, params);\n      return $this;\n    };\n  })(jQuery);\n}\n\nwindow.VideoBackgrounds = VideoBackgrounds;\n"],
  "mappings": "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",
  "names": ["self", "self", "self", "self"]
}
